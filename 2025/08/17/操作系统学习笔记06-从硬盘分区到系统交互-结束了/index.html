<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Redefine"><meta name="author" content="Maple"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="canonical" href="http://maple-pwn.github.io/2025/08/17/操作系统学习笔记06-从硬盘分区到系统交互-结束了/"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta name="description" content="Hexo Theme Redefine, Redefine Your Hexo Journey."><meta property="og:type" content="article"><meta property="og:title" content="操作系统学习笔记06-从硬盘分区到系统交互---结束了?"><meta property="og:url" content="http://maple-pwn.github.io/2025/08/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B006-%E4%BB%8E%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA%E5%88%B0%E7%B3%BB%E7%BB%9F%E4%BA%A4%E4%BA%92-%E7%BB%93%E6%9D%9F%E4%BA%86/index.html"><meta property="og:site_name" content="Maple"><meta property="og:description" content="Hexo Theme Redefine, Redefine Your Hexo Journey."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://maple-pwn.github.io/images/redefine-og.webp"><meta property="article:published_time" content="2025-08-16T16:26:50.000Z"><meta property="article:modified_time" content="2025-08-16T16:29:02.993Z"><meta property="article:author" content="Maple"><meta property="article:tag" content="OS"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://maple-pwn.github.io/images/redefine-og.webp"><link rel="icon" type="image/png" href="/images/1.svg" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/1.svg"><meta name="theme-color" content="#A31F34"><link rel="shortcut icon" href="/images/1.svg"><title>操作系统学习笔记06-从硬盘分区到系统交互---结束了? | Maple</title><link rel="stylesheet" href="/fonts/Chillax/chillax.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/build/tailwind.css"><link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css"><link rel="stylesheet" href="/fonts/Geist/geist.css"><script id="hexo-configurations">window.config={hostname:"maple-pwn.github.io",root:"/",language:"zh-CN",path:"search.json"},window.theme={articles:{style:{font_size:"16px",line_height:1.5,image_border_radius:"14px",image_alignment:"center",image_caption:!1,link_icon:!0,delete_mask:!1,title_alignment:"left",headings_top_spacing:{h1:"3.2rem",h2:"2.4rem",h3:"1.9rem",h4:"1.6rem",h5:"1.4rem",h6:"1.3rem"}},word_count:{enable:!0,count:!0,min2read:!0},author_label:{enable:!0,auto:!1,list:[]},code_block:{copy:!0,style:"mac",highlight_theme:{light:"github",dark:"vs2015"},font:{enable:!1,family:null,url:null}},toc:{enable:!0,max_depth:3,number:!1,expand:!0,init_open:!0},copyright:{enable:!0,default:"cc_by_nc_sa"},lazyload:!0,pangu_js:!1,recommendation:{enable:!1,title:"推荐阅读",limit:3,mobile_limit:2,placeholder:"/images/wallhaven-wqery6-light.webp",skip_dirs:[]}},colors:{primary:"#A31F34",secondary:null,default_mode:"light"},global:{fonts:{chinese:{enable:!1,family:null,url:null},english:{enable:!1,family:null,url:null},title:{enable:!1,family:null,url:null}},content_max_width:"1000px",sidebar_width:"210px",hover:{shadow:!0,scale:!1},scroll_progress:{bar:!1,percentage:!0},website_counter:{url:"https://cn.vercount.one/js",enable:!0,site_pv:!0,site_uv:!0,post_pv:!0},single_page:!0,preloader:{enable:!1,custom_message:null},open_graph:{enable:!0,image:"/images/redefine-og.webp",description:"Hexo Theme Redefine, Redefine Your Hexo Journey."},google_analytics:{enable:!1,id:null}},home_banner:{enable:!0,style:"fixed",image:{light:"/images/wallhaven-wqery6-light.webp",dark:"/images/wallhaven-wqery6-dark.webp"},title:"Maple's blog",subtitle:{text:["lucky day"],hitokoto:{enable:!1,show_author:!0,api:"https://v1.hitokoto.cn"},typing_speed:100,backing_speed:80,starting_delay:500,backing_delay:1500,loop:!0,smart_backspace:!0},text_color:{light:"#fff",dark:"#d1d1b6"},text_style:{title_size:"2.8rem",subtitle_size:"1.5rem",line_height:1.2},custom_font:{enable:!1,family:null,url:null},social_links:{enable:!0,style:"default",links:{github:"https://github.com/maple-pwn",email:"3079403765@qq.com"},qrs:{weixin:null}}},plugins:{feed:{enable:!1},aplayer:{enable:!1,type:"fixed",audios:[{name:null,artist:null,url:null,cover:null,lrc:null}]},mermaid:{enable:!0,version:"11.4.1"}},version:"2.8.2",navbar:{auto_hide:!0,color:{left:"#f78736",right:"#367df7",transparency:35},width:{home:"1200px",pages:"1000px"},links:{Home:{path:"/",icon:"fa-solid fa-house"},Archives:{path:"/archives",icon:"fa-solid fa-box-archive"},Github:{path:"https://github.com/maple-pwn",icon:"fa-brands fa-github"},Bookmarks:{icon:"fa-solid fa-bookmark",path:"/bookmarks/"}},search:{enable:!0,preload:!0}},page_templates:{friends_column:2,tags_style:"blur",bookmark_colum:3},home:{sidebar:{enable:!0,position:"left",first_item:"menu",announcement:null,show_on_mobile:!0,links:{Archives:{path:"/archives",icon:"fa-solid fa-box-archive"},Tags:{path:"/tags",icon:"fa-solid fa-tags"},Categories:{path:"/categories",icon:"fa-solid fa-list"}}},article_date_format:"YYYY-MM-DD",excerpt_length:200,categories:{enable:!0,limit:3},tags:{enable:!0,limit:3}},footerStart:"2025/4/5 00:00:00"},window.lang_ago={second:"%s 秒前",minute:"%s 分钟前",hour:"%s 小时前",day:"%s 天前",week:"%s 周前",month:"%s 个月前",year:"%s 年前"},window.data={masonry:!1}</script><link rel="stylesheet" href="/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/fontawesome/brands.min.css"><link rel="stylesheet" href="/fontawesome/solid.min.css"><link rel="stylesheet" href="/fontawesome/regular.min.css"><link rel="stylesheet" href="/fontawesome/sharp-solid.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span></div><main class="page-container" id="swup"><div class="main-content-container flex flex-col justify-between min-h-dvh"><div class="main-content-header"><header class="navbar-container px-6 md:px-12"><div class="navbar-content transition-navbar"><div class="left"><a class="logo-title" href="/">Maple</a></div><div class="right"><div class="desktop"><ul class="navbar-list"><li class="navbar-item"><a href="/"><i class="fa-solid fa-house fa-fw"></i> 首页</a></li><li class="navbar-item"><a href="/archives"><i class="fa-solid fa-box-archive fa-fw"></i> 归档</a></li><li class="navbar-item"><a target="_blank" rel="noopener" href="https://github.com/maple-pwn"><i class="fa-brands fa-github fa-fw"></i> GITHUB</a></li><li class="navbar-item"><a href="/bookmarks/"><i class="fa-solid fa-bookmark fa-fw"></i> BOOKMARKS</a></li><li class="navbar-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div><div class="icon-item navbar-bar"><div class="navbar-bar-middle"></div></div></div></div></div><div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between"><ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start"><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="/"><span>首页 </span><i class="fa-solid fa-house fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="/archives"><span>归档 </span><i class="fa-solid fa-box-archive fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" target="_blank" rel="noopener" href="https://github.com/maple-pwn"><span>GITHUB </span><i class="fa-brands fa-github fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full" href="/bookmarks/"><span>BOOKMARKS </span><i class="fa-solid fa-bookmark fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active" href="/tags"><span>Tags</span> <i class="fa-solid fa-tags fa-sm fa-fw"></i></a></li><li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full"><a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active" href="/categories"><span>Categories</span> <i class="fa-solid fa-list fa-sm fa-fw"></i></a></li></ul><div class="statistics flex justify-around my-2.5"><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">6</div><div class="label text-third-text-color text-sm">标签</div></a><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">3</div><div class="label text-third-text-color text-sm">分类</div></a><a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives"><div class="number text-2xl sm:text-xl text-second-text-color font-semibold">11</div><div class="label text-third-text-color text-sm">文章</div></a></div></div><div class="window-mask"></div></header></div><div class="main-content-body transition-fade-up"><div class="main-content"><div class="post-page-container flex relative justify-between box-border w-full h-full"><div class="article-content-container"><div class="article-title relative w-full"><div class="w-full flex items-center pt-6 justify-start"><h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">操作系统学习笔记06-从硬盘分区到系统交互---结束了?</h1></div></div><div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8"><div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]"><img src="/images/1.svg"></div><div class="info flex flex-col justify-between"><div class="author flex items-center"><span class="name text-default-text-color text-lg font-semibold">Maple</span> <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv2</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="desktop">2025-08-17 00:26:50</span> <span class="mobile">2025-08-17 00:26:50</span> <span class="hover-info">创建</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="desktop">2025-08-17 00:29:02</span> <span class="mobile">2025-08-17 00:29:02</span> <span class="hover-info">更新</span> </span><span class="article-categories article-meta-item"><i class="fa-regular fa-folders"></i>&nbsp;<ul><li><a href="/categories/OS/">OS</a>&nbsp;</li></ul></span><span class="article-tags article-meta-item"><i class="fa-regular fa-tags"></i>&nbsp;<ul><li><a href="/tags/OS/">OS</a>&nbsp;</li></ul></span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8"><h2 id="0x0f-实现硬盘分区"><a href="#0x0f-实现硬盘分区" class="headerlink" title="0x0f 实现硬盘分区"></a>0x0f 实现硬盘分区</h2><div class="note p-4 mb-4 rounded-small tip"><p>这一节中关于硬盘分区是比较老的知识，现代磁盘分区已经不这么做了，等以后写现代操作系统的时候再补充罢（挖个坑）</p></div><blockquote><p>之前有简单介绍过磁盘的物理分区方式，可以看<a href="https://maple-pwn.github.io/2025/06/22/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B001-%E4%BB%8EPOST%E5%88%B0Loader/#0x03-MBR%E6%93%8D%E4%BD%9C%E7%A1%AC%E7%9B%98%E4%BB%A5%E5%8F%8ALoader">这里</a>，但当时的操作只是简单的启动，并不成体系。为了实现文件系统，我们必须建立一套完整的方法，也即是<strong>磁盘驱动程序</strong></p></blockquote><p>有关于磁盘物理构成的知识之前介绍过了，简单说一下</p><ul><li>盘片：布满磁性介质的小光盘</li><li>扇区：硬盘读写的基本单位，在磁道上均匀分布。通常一个扇区为512字节大小</li><li>磁道：盘片上的一个个同心园环就是一个个磁道</li><li>磁头：一个读取磁盘的机械臂，每个盘面都存在一个磁头，用来读取该盘面上的磁盘信息</li><li>柱面：由不同盘面的相同磁道构成的一个圆柱面就叫住面，这里也是为了提升咱们的IO读写速度</li><li>分区：由多个编号连续的柱面组成的，这里注意一个柱面不能包含多个分区</li></ul><p>可以得出如下公式<br>$$<br>硬盘容量 &#x3D; 单片容量×磁头数 \<br>单片容量 &#x3D; 每磁道扇区数×磁道数×512字节<br>$$</p><hr><p>这里介绍<strong>磁盘分区表(DPT)</strong></p><p>同样，这个表是由多个分区元信息汇成的表，表中每一项都对应一个分区，主要记录各个分区的起始扇区地址，大小界限等</p><p>最初的磁盘分区表位于 MBR 引导扇区中，该扇区位于 0 盘 1 道 1 扇区（物理扇区编号从 1 开始，逻辑扇区地址 LBA 从 0 开始），也就是硬盘最开始的扇区，扇区大小为 512 字节，这 512 字节内容包括以下内容</p><div class="code-container" data-rel="Csharp"><figure class="iseeu highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">0x000 ~ 0x1BD</span>]   主引导程序（Bootloader 第<span class="number">1</span>阶段）</span><br><span class="line">[<span class="meta">0x1BE ~ 0x1FD</span>]   分区表（共<span class="number">4</span>项，每项<span class="number">16</span>字节）</span><br><span class="line">[<span class="meta">0x1FE ~ 0x1FF</span>]   结束标志 <span class="number">0x55AA</span></span><br></pre></td></tr></table></figure></div><p>在早期的硬盘分区管理中，<strong>MBR（Master Boot Record）</strong> 分区表只能记录 <strong>最多 4 个主分区</strong>。这在上世纪硬盘容量还不大的时候是足够的，但随着存储空间不断增长，4 个分区已经无法满足需求，于是便引入了 <strong>扩展分区（Extended Partition）</strong> 的概念。</p><ul><li><p><strong>为什么需要扩展分区</strong></p><p>扩展分区的设计初衷很简单：在不破坏原有 MBR 结构的前提下，突破 4 个主分区的限制。它本身并不直接存放数据，而是一个 <strong>“容器分区”</strong>，用于容纳更多的 <strong>逻辑分区（Logical Partition）</strong>。</p><p>在 MBR 分区表中，最多只能有一个分区项用于扩展分区，其余分区项依然可以是普通主分区。扩展分区内部的结构与普通分区不同，它需要额外的分区记录机制——<strong>EBR（Extended Boot Record，扩展引导记录）</strong>。</p></li><li><p><strong>EBR 与逻辑分区的组织方式</strong></p><p><strong>EBR</strong> 的作用类似于 MBR 中的分区表，但它专门用来记录扩展分区内的逻辑分区信息。</p><p>每个 EBR 包含两条分区表项：</p><ol><li>当前逻辑分区的起始地址与大小</li><li><strong>下一个逻辑分区的 EBR 地址</strong>（如果还有下一个逻辑分区）</li></ol><p>这种结构形成了一条 <strong>链表</strong>：</p><ul><li>第一逻辑分区的 EBR 位于扩展分区的起始位置。</li><li>通过 EBR 中的“下一分区”指针，可以依次找到后续的逻辑分区。</li><li>最后一个逻辑分区的 EBR 中，第二条分区表项为空（0），表示链表结束。</li></ul></li></ul><pre class="mermaid">graph TD
    MBR[MBR 分区表]:::mbr --- P1[主分区1]:::primary
    MBR --- P2[主分区2]:::primary
    MBR --- P3[主分区3]:::primary
    MBR --- EXT[扩展分区]:::extended

    EXT --- OBR[OBR<br>记录逻辑分区1信息]:::obr --- L1[逻辑分区1]:::logical
    L1 --- EBR2[EBR2<br>记录逻辑分区2信息]:::ebr --- L2[逻辑分区2]:::logical
    L2 --- EBR3[EBR3<br>记录逻辑分区3信息]:::ebr --- L3[逻辑分区3]:::logical

    classDef mbr fill:#FFD700,stroke:#333,stroke-width:1px;
    classDef primary fill:#87CEFA,stroke:#333,stroke-width:1px;
    classDef extended fill:#FFA07A,stroke:#333,stroke-width:1px;
    classDef obr fill:#90EE90,stroke:#333,stroke-width:1px;
    classDef ebr fill:#98FB98,stroke:#333,stroke-width:1px;
    classDef logical fill:#D8BFD8,stroke:#333,stroke-width:1px;</pre><hr><p>关于磁盘部分不想记录很多，毕竟目前的用途已经不大了，暂时放在这里罢</p><hr><h2 id="0x10-文件系统"><a href="#0x10-文件系统" class="headerlink" title="0x10 文件系统"></a>0x10 文件系统</h2><h3 id="inode、简介块索引表、文件控制块FCB"><a href="#inode、简介块索引表、文件控制块FCB" class="headerlink" title="inode、简介块索引表、文件控制块FCB"></a>inode、简介块索引表、文件控制块FCB</h3><p>在磁盘的领域中，<strong>块（block）<strong>是文件系统管理数据的基本单位：虽然硬盘的物理读写单位是</strong>扇区</strong>，但为了减少频繁的访问，操作系统通常会将多个扇区组合位一个更大的<strong>块</strong>。在Linux或Unix中，块是文件系统的读写单位，这意味着<code>即便文件只有1B，也将占用一个完整的块</code></p><div class="note p-4 mb-4 rounded-small tip"><p>Windows中，我们一般称为<strong>簇</strong></p></div><p>但是当文件大于一个块的时候，多个块该如何组织在一起呢？</p><hr><p style="color:red;font-weight:700">FAT链式结构</p><p>早期的FAT(File Allocation Table)文件系统中，文件的多个块采用<strong>链式结构</strong>来组织。在每个块的末尾保存下一个块的地址，这样块与块之间可以像链表一样串联。好处显而易见：文件的块可以分散在磁盘的任意位置，不必连续存放，这样可以有效利用磁盘零散的空间，提高空间利用率</p><p>但缺点也显而易见：当你要访问文件的第N个块时，必须从第一个块开始，一路顺着地址链找到目标块，这中访问模式在逻辑上很低效，并且硬盘速度本身就不快，更会增加寻道次数，效率极其低下</p><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810153047358.png" alt="image-20250810153047358"></p><hr><p style="color:red;font-weight:700">inode索引结构</p><p>相对而言，Unix采用<strong>索引结构</strong>来管理文件，也就是为文件的所有数据块建立一张索引表，表中每一项直接记录对应数据块的物理地址。这样要访问第N个块，只需要查表即可，随机访问性能大大提升</p><p>而在 Unix&#x2F;Linux 文件系统中，这个索引结构的具体实现就是 <strong>inode(index node)</strong>。每个文件都对应一个 inode，里面保存了文件的元信息（权限、属主、时间戳、文件大小等）以及数据块的位置。inode 本质上时文件系统中的一种<strong>文件控制块（FCB）</strong>，只不过FCB是一个泛称</p><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810153053484.png" alt="image-20250810153053484"></p><hr><p style="color:red;font-weight:700">直接块与间接块</p><p>inode 中并不是直接存下文的所有块地址，因为索引表也要占空间。为了平衡性能与存储开销，Unix采取了分级设计*（世界的尽头是分级）*</p><ul><li>inode 前 12 个指针称为<strong>直接块</strong>，直接指向文件数据块</li><li>第 13 个指针指向<strong>一级间接块索引表</strong>，它本身是一个存放块地址的表，一个表可以记录 256 个数据块</li><li>第 14 个指针指向<strong>二级间接块索引表</strong>，它的每个表项记录的是一个一级间接块的地址，可以记录 $256*256$ 个数据块</li><li>第 15个指针指向<strong>三级间接块索引表</strong>，能索引$256<em>256</em>256$个数据块</li></ul><p>通过这种方式，文件既能在小尺寸下快速访问，又能在需要时支持极大的容量，理论上可以轻松容纳超大文件。当然，如果真有超过三级间接索引能力的文件，那只能分割成多个文件来处理。</p><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810154056944.png" alt="image-20250810154056944"></p><h3 id="目录项与目录简介"><a href="#目录项与目录简介" class="headerlink" title="目录项与目录简介"></a>目录项与目录简介</h3><blockquote><p>刚刚有说过，inode记录了文件大部分元信息——权限、属主、大小、时间戳，以及数据块的地址。但是这里缺没有存放<strong>文件名</strong>，用户最关心的属性</p><p>既然我们通过文件名访问文件，为什么不直接把文件名放到inode里呢？</p><p>对于现代文件系统来说没有必要：文件系统使用inode来标识和管理文件的，只要有了inode，就能定位到文件的实际数据块。而文件名对于文件系统来说并不重要</p><p>但对于人类用户来说，记inode有点神经病了，还是习惯用文件名去找文件。这就引出了一个新问题：<strong>文件系统是如何把文件名和 inode 联系起来的呢</strong>？</p></blockquote><p><strong>目录也是文件</strong></p><p>回想一下，我们平时访问文件，不论是执行一个程序，还是打开一个文档，都是通过路径来的。而路径的每一层，其实都是一个<strong>目录</strong>。在 Linux 中，目录和普通文件一样，也是用 inode 来表示的，所以目录本质上也是一种文件，只不过它的内容不是数据，而是<strong>目录项（directory entry）</strong>。</p><p>这里有个关键点：</p><ul><li>如果一个 inode 表示的是普通文件，那么它指向的数据块里存的是这个文件的内容。</li><li>如果一个 inode 表示的是目录文件，那么它指向的数据块里存的就是一组目录项。</li></ul><hr><p><strong>什么是目录项</strong></p><p>目录项是一个“文件列表”的条目，每个条目至少包含三个信息：</p><ol><li>文件名</li><li>文件类型（目录&#x2F;普通文件等）</li><li>文件对应的 inode 编号</li></ol><p>它的作用有两个：</p><ul><li><strong>绑定文件名和 inode</strong>，让用户可以通过文件名找到 inode</li><li><strong>标识文件类型</strong>，告诉系统该 inode 对应的是目录还是普通文件</li></ul><p>你在 Linux 里执行 <code>ls -i</code> 时，看到的就是目录项中的文件名和 inode 编号的对应关系；执行 <code>ls -l</code> 时，额外看到的权限、属主等信息来自 inode 本身。</p><table><thead><tr><th><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810161713565.png" alt="image-20250810161713565"></th><th><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810161722940.png" alt="image-20250810161722940"></th></tr></thead><tbody><tr><td>目录中的目录项</td><td>目录项信息及 inode 信息</td></tr></tbody></table><p>有了目录项，文件系统查找文件的过程就很清晰了：</p><ol><li>在当前目录中找到匹配文件名的目录项</li><li>从目录项中获取该文件的 inode 编号</li><li>根据 inode 编号去 inode 表（inode 数组）里找到对应的 inode</li><li>读取 inode 中记录的各个数据块地址，进而获取文件内容</li></ol><hr><p><strong>小小总结一下</strong></p><ol><li>每个文件都有自己单独的inode，inode 是文件实体数据块在文件系统上的元信息。</li><li>所有文件的inode 集中管理，形成inode 数组，每个inode 的编号就是在该inode 数组中的下标。</li><li>inode 中的前12 个直接数据块指针和后3 个间接块索引表用于指向文件的数据块实体。</li><li>文件系统中并不存在具体称为“目录”的数据结构，同样也没有称为“普通文件”的数据结构，统一用同一种inode 表示。inode 表示的文件是普通文件，还是目录文件，取决于inode 所指向数据块中的实际内容是什么，即数据块中的内容要么是普通文件本身的数据，要么是目录中的目录项。</li><li>目录项仅存在于inode 指向的数据块中，有目录项的数据块就是目录，目录项所属的inode 指向的所有数据块便是目录。</li><li>目录项中记录的是文件名、文件inode 的编号和文件类型，目录项起到的作用有两个，一是粘合文件名及inode，使文件名和inode 关联绑定，二是标识此inode 所指向的数据块中的数据类型（比如是普通文件，还是目录，当然还有更多的类型）。</li><li>inode 是文件的“实质”，但它并不能直接引用，必须通过文件名找到文件名所在的目录项，然后从该目录项中获得inode 的编号，然后用此编号到inode 数组中去找相关的inode，最终找到文件的数据块。</li></ol><p>目录项和inode的关系如下图：</p><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810162151672.png" alt="image-20250810162151672"></p><div class="note-large blue"><div class="notel-title rounded-t-lg p-3 font-bold text-lg flex flex-row gap-2 items-center"><p>“死循环”的错觉与根目录的作用</p></div><div class="notel-content"><p>有人可能会想：要找到文件的数据块，需要 inode；要找到 inode，需要目录项；而目录项又存在于目录文件的数据块中，这数据块又需要 inode 来找——这不是陷入死循环了吗？</p><p>其实不会。文件系统总得有个“起点”，这个起点就是<strong>根目录 <code>/</code></strong>。每个分区都有自己的根目录，而且在文件系统格式化时，根目录所在数据块的地址是固定写死的。查找文件时，从根目录开始递归进入子目录，就能最终找到任何文件。</p></div></div><h3 id="超级块与文件系统布局"><a href="#超级块与文件系统布局" class="headerlink" title="超级块与文件系统布局"></a>超级块与文件系统布局</h3><p>在前面已经介绍了 <strong>inode、目录项</strong>以及<strong>根目录</strong>，这些是构建文件系统的基础。而此处将要介绍<strong>超级块</strong>的概念。它是文件系统运行的“总指挥”</p><hr><p><strong>超级块</strong>可以认为是保存文件系统元信息的元信息，类似于文件系统的配置文件。作用如下：</p><ul><li>记录文件系统的整体结构和配置信息</li><li>让系统能够快速定位重要数据结构（如 inode 数组、根目录、位图等）</li><li>用来识别文件系统的类型（通过魔数）</li></ul><blockquote><p>而我们实现最简文件系统，超级块中存储可以如下：</p><ol><li>inode数组地址以及大小<ul><li>每个文件有一个inode</li><li>inode数组长度 &#x3D; 分区最大文件数（格式化时确定）</li></ul></li><li>inode位图地址及大小<ul><li>用位图管理inode的使用情况</li></ul></li><li>根目录地址及大小<ul><li>每个分区根目录位置不统一，所以必须记录</li></ul></li><li>空闲块位图地址及大小<ul><li>用位图管理空闲数据块的使用情况</li></ul></li><li>魔数<ul><li>用来区分文件系统类型（ext2，ext4，FAT32）</li></ul></li></ol><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810213347788.png" alt="image-20250810213347788"></p></blockquote><hr><p>我们参考ext2文件系统，可以做出如下文件系统布局，不过少了一些块组和块组描述符</p><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250810213513123.png" alt="image-20250810213513123"></p><hr><p>文件系统的主要工作就是资源管理，而跟踪资源状态最常用的方法就是位图</p><p>创建文件系统的时候，现在内存中生成这些位图，再把它们写入硬盘中，这个过程就叫做<strong>持久化</strong>。</p><p>而这样做的原因是：分区真正使用是在挂载的时候，而挂载之前内存里是没有位图的，所以必须实现把它们存到磁盘上，将来挂载分区时再从磁盘读回来放到内存中。</p><p>由于内存是易失的，断电就会丢失数据，所以哪怕位图只改动了一个位，也要立刻同步回磁盘。位图的大小按扇区对齐，最后一个扇区往往会有多余的位，这些位并不对应真实资源，如果不处理，可能会被误分配导致破坏数据，所以在持久化前要把这些多余位初始化为1，标识已经占用，避免后续使用</p><p>而挂载分区的本质，就是把该分区的文件系统元信息（包括超级块，位图等）从磁盘加载到内存，用内存的数据结构来跟踪资源状态，写操作再及时同步到硬盘。</p><hr><h3 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h3><p>在 Linux 中，几乎所有文件操作都绕不开一个概念——文件描述符（File Descriptor，FD）</p><p>简单来说，文件描述符就是一个整数，它是当前进程 <strong>文件描述符数组</strong> 的下标。Linux 会在每个进程的 PCB（进程控制块）中预先分配一个文件描述符数组，用于记录当前进程打开的文件</p><p>其中，前三个文件描述符是固定保留的：</p><ul><li><code>0</code> -&gt; 标准输入(stdin)</li><li><code>1</code> -&gt; 标准输出(stdout)</li><li><code>2</code> -&gt; 标准报错(stderr)</li></ul><hr><p>Linux通过三层跳转从文件描述符找到磁盘数据块</p><table><thead><tr><th>层级</th><th>位置</th><th>作用</th></tr></thead><tbody><tr><td>文件描述符数组</td><td>每个进程 PCB</td><td>存放“文件表下标”</td></tr><tr><td>文件表（全局）</td><td>内核共享</td><td>保存 <code>struct file</code>，指向 inode</td></tr><tr><td>inode 队列（缓存）</td><td>内核共享</td><td>保存文件存储信息，指向磁盘数据块</td></tr></tbody></table><pre class="mermaid">flowchart LR
    fd["文件描述符 (int)"] --> fd_array["进程文件描述符数组"]
    fd_array --> file_table["文件表 (struct file[])"]
    file_table --> inode["inode 队列"]
    inode --> disk["磁盘数据块"]</pre><ol><li><p>用 fd 在 <strong>文件描述符数组</strong> 找到文件表下标</p></li><li><p>用下标找到 <strong>文件表</strong> 中的 <code>struct file</code></p></li><li><p>通过 <code>struct file</code> 的 <code>f_inode</code> 指针找到 <strong>inode</strong></p></li><li><p>inode 中有文件数据块的位置，最终访问磁盘</p></li></ol><h2 id="0x11-系统交互"><a href="#0x11-系统交互" class="headerlink" title="0x11 系统交互"></a>0x11 系统交互</h2><h3 id="fork介绍"><a href="#fork介绍" class="headerlink" title="fork介绍"></a>fork介绍</h3><p><code>fork</code>函数原型为<code>pid_t fork(void)</code>，返回值为数字，可能是<strong>子进程的pid</strong>，可能是<strong>0</strong>，也可能是**-1**。</p><blockquote><p>之所以会有 3 种返回值，是因为 Linux 中没有获取子进程 pid 的方法，因此为了让父进程获知自己的孩子是谁，<code>fork</code>会给父进程返回子进程的 pid。子进程可以通过系统调用<code>getpid</code>来获知自己的父亲是谁，并且没有pid&#x3D;0的进程，因此 <code>fork</code> 给子进程返回 0 ，从返回值上和父进程区别开来。如果 <code>fork</code> 失败，则返回 -1 ，没有子进程产生</p></blockquote><p>这里有个很神秘的现象：<strong><code>fork</code>执行一次会返回两次pid</strong>，可以看看下面这个例子</p><div class="code-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;fork!\n&quot;</span>);</span><br><span class="line">    sleep(<span class="number">5</span>);</span><br><span class="line">    <span class="type">int</span> pid = fork();</span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">-1</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pid) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;father&#x27;s pid is %d\n&quot;</span>,getpid());</span><br><span class="line">      	sleep(<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;child&#x27;s pid is %d\n&quot;</span>,getpid());</span><br><span class="line">        sleep(<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>运行情况如下</p><p><em><code>ps -ef | grep fork_test | grep -v grep</code>指令在运行test时执行</em></p><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250816222245032.png" alt="image-20250816222245032"></p><p>可以得出这样一个结论：<code>fork</code>后，由之前的一个进程变成了两个进程，也就是说，<strong><code>fork</code>的作用是克隆进程。克隆出来的进程拥有独立的地址空间</strong>，两个地址执行的是独立且相同的代码，各自的指令中都包含第6行的<code>fork</code>调用，只是子进程是在<code>fork</code>函数返回之后才开始执行的，因此执行的是<code>fork</code>之后的代码</p><p>大致就像下面这张图，<code>fork</code>的中文意思“叉子”是很形象了</p><p><img lazyload src="/images/loading.svg" data-src="/../images/image-20250816222907324.png" alt="image-20250816222907324"></p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>这部分内容太多了，又大多是代码，不是很想介绍了<del>（懒狗）</del></p><hr><p>其实后面还有一部分关于管道的内容，但是这个有些太少了，通信可以单独拿出来学习一下的，以后完整的写一写罢</p></div><div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8"><div class="article-copyright-info-container"><ul><li><strong>标题:</strong> 操作系统学习笔记06-从硬盘分区到系统交互---结束了?</li><li><strong>作者:</strong> Maple</li><li><strong>创建于 :</strong> 2025-08-17 00:26:50</li><li><strong>更新于 :</strong> 2025-08-17 00:29:02</li><li><strong>链接:</strong> https://github.com/maple-pwn/maple-pwn.github.io/2025/08/17/操作系统学习笔记06-从硬盘分区到系统交互-结束了/</li><li><strong>版权声明: </strong>本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。</li></ul></div></div><ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden"><li class="tag-item mx-0.5"><a href="/tags/OS/">#OS</a>&nbsp;</li></ul><div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8"><div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2"><a class="next" rel="next" href="/2025/08/06/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B005-%E4%BB%8EIO%E6%9C%BA%E5%88%B6%E5%88%B0%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/"><span class="title flex justify-center items-center"><span class="post-nav-title-item">操作系统学习笔记05-从IO机制到系统调用</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex justify-center items-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">目录</div><div class="page-title">操作系统学习笔记06-从硬盘分区到系统交互---结束了?</div><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0x0f-%E5%AE%9E%E7%8E%B0%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA"><span class="nav-text">0x0f 实现硬盘分区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x10-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">0x10 文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#inode%E3%80%81%E7%AE%80%E4%BB%8B%E5%9D%97%E7%B4%A2%E5%BC%95%E8%A1%A8%E3%80%81%E6%96%87%E4%BB%B6%E6%8E%A7%E5%88%B6%E5%9D%97FCB"><span class="nav-text">inode、简介块索引表、文件控制块FCB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E9%A1%B9%E4%B8%8E%E7%9B%AE%E5%BD%95%E7%AE%80%E4%BB%8B"><span class="nav-text">目录项与目录简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B6%85%E7%BA%A7%E5%9D%97%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%B8%83%E5%B1%80"><span class="nav-text">超级块与文件系统布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="nav-text">文件描述符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x11-%E7%B3%BB%E7%BB%9F%E4%BA%A4%E4%BA%92"><span class="nav-text">0x11 系统交互</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fork%E4%BB%8B%E7%BB%8D"><span class="nav-text">fork介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0"><span class="nav-text">实现</span></a></li></ol></li></ol></div></div></div></div></div></div><div class="main-content-footer"><footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color"><div class="info-container py-3 text-center"><div class="text-center">&copy; <span>2025</span> - 2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration:0.5s;color:#f54545"></i>&nbsp;&nbsp;<a href="/">Maple</a><p class="post-count space-x-0.5"><span>共撰写了 11 篇文章</span></p></div><script data-swup-reload-script src="https://cn.vercount.one/js"></script><div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right"><span id="busuanzi_container_site_uv" class="lg:!block"><span class="text-sm">访问人数</span> <span id="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" class="lg:!block"><span class="text-sm">总访问量</span> <span id="busuanzi_value_site_pv"></span></span></div><div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left"><span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span> <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.2</a></span></div><div>博客已运行 <span class="odometer" id="runtime_days"></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒</div><script data-swup-reload-script>try{function odometer_init(){document.querySelectorAll(".odometer").forEach(e=>{new Odometer({el:e,format:"( ddd).dd",duration:200})})}odometer_init()}catch(e){}</script></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="article-tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li></ul></div></div><div class="right-side-tools-container"><div class="side-tools-container"><ul class="hidden-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="visible-tools-list"><li class="right-bottom-tools toggle-tools-list flex justify-center items-center"><i class="fa-regular fa-cog fa-spin"></i></li><li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fa-solid fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="站内搜索您需要的内容..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa-solid fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="/js/build/libs/Swup.min.js"></script><script src="/js/build/libs/SwupSlideTheme.min.js"></script><script src="/js/build/libs/SwupScriptsPlugin.min.js"></script><script src="/js/build/libs/SwupProgressPlugin.min.js"></script><script src="/js/build/libs/SwupScrollPlugin.min.js"></script><script src="/js/build/libs/SwupPreloadPlugin.min.js"></script><script>const swup=new Swup({plugins:[new SwupScriptsPlugin({optin:!0}),new SwupProgressPlugin,new SwupScrollPlugin({offset:80}),new SwupSlideTheme({mainElement:".main-content-body"}),new SwupPreloadPlugin],containers:["#swup"]})</script><script src="/js/build/tools/imageViewer.js" type="module"></script><script src="/js/build/utils.js" type="module"></script><script src="/js/build/main.js" type="module"></script><script src="/js/build/layouts/navbarShrink.js" type="module"></script><script src="/js/build/tools/scrollTopBottom.js" type="module"></script><script src="/js/build/tools/lightDarkSwitch.js" type="module"></script><script src="/js/build/layouts/categoryList.js" type="module"></script><script src="/js/build/tools/localSearch.js" type="module"></script><script src="/js/build/tools/codeBlock.js" type="module"></script><script src="/js/build/layouts/lazyload.js" type="module"></script><script src="/js/build/tools/runtime.js"></script><script src="/js/build/libs/odometer.min.js"></script><link rel="stylesheet" href="/assets/odometer-theme-minimal.css"><script src="/js/build/libs/Typed.min.js"></script><script src="/js/build/plugins/typed.js" type="module"></script><script src="/js/build/libs/mermaid.min.js"></script><script src="/js/build/plugins/mermaid.js"></script><script src="/js/build/libs/anime.min.js"></script><script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script><script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script><script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script><script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script><script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script><script src="/js/build/layouts/bookmarkNav.js" type="module"></script></body></html>